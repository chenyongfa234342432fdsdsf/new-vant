import {
  consola
} from "../chunk-RPDGDFJ6.js";
import "../chunk-D3YCLLHO.js";
import "../chunk-OKPPX6YV.js";

// src/common/manager.ts
import path from "path";
import { execa } from "execa";
import { execSync } from "child_process";
import { readJsonSync } from "fs-extra";
var hasYarnCache;
function hasYarn() {
  if (hasYarnCache === void 0) {
    try {
      execSync("yarn --version", { stdio: "ignore" });
      hasYarnCache = true;
    } catch (e) {
      hasYarnCache = false;
    }
  }
  return hasYarnCache;
}
function getPackageManager() {
  const pkg = readJsonSync(path.join(process.cwd(), "package.json"));
  if (pkg == null ? void 0 : pkg.packageManager) {
    return pkg == null ? void 0 : pkg.packageManager;
  }
  return hasYarn() ? "yarn" : "npm";
}
async function installDependencies() {
  consola.info("Install Dependencies\n");
  try {
    const manager = getPackageManager();
    await execa(manager, ["install", "--prod=false"], {
      stdio: "inherit"
    });
    console.log("");
  } catch (err) {
    console.log(err);
    throw err;
  }
}
export {
  hasYarn,
  installDependencies
};
